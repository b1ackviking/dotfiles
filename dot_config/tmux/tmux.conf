setw -g xterm-keys on
set -s escape-time 50
set -sg repeat-time 600
set -s focus-events on

set -g prefix2 C-a
bind C-a send-prefix -2

set -q -g status-utf8 on
setw -q -g utf8 on

set -g history-limit 5000

set -g base-index 1
setw -g pane-base-index 1

setw -g automatic-rename on
set -g renumber-windows on

set -g set-titles on

set -g display-panes-time 800
set -g display-time 1000

set -g status-interval 5
set -g clock-mode-style 24

set -g monitor-activity on
set -g visual-activity off

bind C-c new-session

bind C-f command-prompt -p find-session 'switch-client -t %%'

bind BTab switch-client -l

bind - split-window -v
bind _ split-window -h

bind -r h select-pane -L
bind -r j select-pane -D
bind -r k select-pane -U
bind -r l select-pane -R
bind > swap-pane -D
bind < swap-pane -U

bind -r H resize-pane -L 2
bind -r J resize-pane -D 2
bind -r K resize-pane -U 2
bind -r L resize-pane -R 2

unbind n
unbind p
bind -r C-h previous-window
bind -r C-l next-window
bind Tab last-window

bind m run 'tmux set -g mouse off'
bind M run 'tmux set -g mouse on'

bind Enter copy-mode

run -b 'tmux bind -t vi-copy v begin-selection 2> /dev/null || true'
run -b 'tmux bind -T copy-mode-vi v send -X begin-selection 2> /dev/null || true'
run -b 'tmux bind -t vi-copy C-v rectangle-toggle 2> /dev/null || true'
run -b 'tmux bind -T copy-mode-vi C-v send -X rectangle-toggle 2> /dev/null || true'
run -b 'tmux bind -t vi-copy y copy-selection 2> /dev/null || true'
run -b 'tmux bind -T copy-mode-vi y send -X copy-selection-and-cancel 2> /dev/null || true'
run -b 'tmux bind -t vi-copy Escape cancel 2> /dev/null || true'
run -b 'tmux bind -T copy-mode-vi Escape send -X cancel 2> /dev/null || true'
run -b 'tmux bind -t vi-copy H start-of-line 2> /dev/null || true'
run -b 'tmux bind -T copy-mode-vi H send -X start-of-line 2> /dev/null || true'
run -b 'tmux bind -t vi-copy L end-of-line 2> /dev/null || true'
run -b 'tmux bind -T copy-mode-vi L send -X end-of-line 2> /dev/null || true'

# copy to X11 clipboard
if -b 'command -v xsel > /dev/null 2>&1' 'bind y run -b "tmux save-buffer - | xsel -i -b"'
if -b '! command -v xsel > /dev/null 2>&1 && command -v xclip > /dev/null 2>&1' 'bind y run -b "tmux save-buffer - | xclip -i -selection clipboard >/dev/null 2>&1"'
# copy to Wayland clipboard
if -b 'command -v wl-copy > /dev/null 2>&1' 'bind y run -b "tmux save-buffer - | wl-copy"'
# copy to macOS clipboard
if -b 'command -v pbcopy > /dev/null 2>&1' 'bind y run -b "tmux save-buffer - | pbcopy"'
if -b 'command -v reattach-to-user-namespace > /dev/null 2>&1' 'bind y run -b "tmux save-buffer - | reattach-to-user-namespace pbcopy"'
# copy to Windows clipboard
if -b 'command -v clip.exe > /dev/null 2>&1' 'bind y run -b "tmux save-buffer - | clip.exe"'
if -b '[ -c /dev/clipboard ]' 'bind y run -b "tmux save-buffer - > /dev/clipboard"'

bind b list-buffers     # list paste buffers
bind p paste-buffer -p  # paste from the top paste buffer
bind P choose-buffer    # choose which buffer to paste from


set -g status-left-length 100
set -g status-right-length 100

# Dracula Color Pallette
# white="#f8f8f2"
# gray="#44475a"
# dark_gray="#282a36"
# light_purple="#bd93f9"
# dark_purple="#6272a4"
# cyan="#8be9fd"
# green="#50fa7b"
# orange="#ffb86c"
# red="#ff5555"
# purple="#b166cc"
# pink="#ff79c6"
# yellow="#f1fa8c"

set -g pane-active-border-style "fg=#bd93f9"
set -g pane-border-style "fg=#44475a"
set -g message-style "bg=#44475a,fg=#f8f8f2"
set -g status-style "bg=#44475a,fg=#f8f8f2"
set -g status-left "#[bg=#282a36]#[fg=#50fa7b]#[bg=#50fa7b]#[fg=#282a36]#{?client_prefix,#[bg=#f1fa8c],} #S #[fg=#50fa7b]#[bg=#44475a]#{?client_prefix,#[fg=#f1fa8c],}"

setw -g window-status-current-format "#[fg=#44475a]#[bg=#6272a4]#[fg=#f8f8f2]#[bg=#6272a4] #I #W#{?window_flags,#[fg=#bd93f9]#{window_flags},} #[fg=#6272a4]#[bg=#44475a]"
setw -g window-status-format "#[fg=#f8f8f2]#[bg=#44475a] #I #W#{?window_flags,#[fg=#6272a4]#{window_flags},}"
setw -g window-status-activity-style "bold"
setw -g window-status-bell-style "bold"

set -g status-right ""
set -ga status-right "#[fg=#ffb86c]#[nobold]#[nounderscore]#[noitalics]#[fg=#282a36]#[bg=#ffb86c] #(/usr/bin/env bash ~/.config/tmux/cpu_info.sh) "
set -ga status-right "#[fg=#8be9fd]#[nobold]#[nounderscore]#[noitalics]#[fg=#282a36]#[bg=#8be9fd] #(/usr/bin/env bash ~/.config/tmux/ram_info.sh) "
set -ga status-right "#[fg=#6272a4]#[nobold]#[nounderscore]#[noitalics]#[fg=#f8f8f2]#[bg=#6272a4] %a %d/%m %R #(date +%Z) "
